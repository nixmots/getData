# getData
Course project for Coursera course Getting and Cleaning Data

## Explanation of the script
For variable descriptions please refer to CodeBook.md of this repository.
### Data import and combining
The script assumes that the data for the project is downloaded and extracted to the system's working directory as stated on the course project page. 
First the stringr and dplyr packages are loaded into R. the following lines of code (line 4 to 18) reads the various data text files into each its data frame - first for the training data and then for the test data. It also replaces the activity numbers from the Y files with the the activity descriptions from the activity labels files, using the dplyr:inner_join function. finally (line 10 and 16) the data frames are combined into to data frames, one containing all training data and all test data repectively. The two data frames are combined into one data frame called "df" on line 18.
### Variable naming and selection
At this point the variables still haven't got meaningful names. Therefore the features textfile is imported into a dataset, and the variables of "df" is renamed with the values of the feature data frame. Now it is easy to select the mean and standard deviation variables of "df". I interpret measurements on the mean and standard deviation as all variables with names containing "mean()" or "std()", thus excluding measurements such as "...meanFreq()" and "angle(...,gravityMean). the script uses grep() on the names() vector of df to identify those columns, and then subset df to only those variables using subset(). the new dataframe containing only mean and standard deviation measures is called "dfMeanStd".
### Renaming of variables
Even though the variables have more descriptive names at this point, the names still need some cleaning. I decided to follow the camelCase convention i.e. combining words without any seperator but with the first letter of each word except the first in upper case. The names already somewhat follow this convention, but they also use the dash symbol as a seperator and contain parentheses. First (line 28) all parenthesis characters are removed with with two gsub() calls which substitutes open parenthesis and closed parenthesis with empty strings respectively. Then a for-loop runs twice to remove dash symbols and change the following letter into uppercase. Within the for-loop (line 30) regexpr() is used to find the location of the first dash within each string. Then paste() is used to remove the dashes and replace the lower case letter following the dash with the same letter in uppercase. The Loop is run twice because there are up to two dashes in each string. the cleansed names are stored in the vector "CamelCase" and the names of the dfMeanStd are renamed to this vector.
### Summary of measurements
For the final step, which is creating a summary table containing the mean of each measurement broken down to activity and subject, the script first changes the activity variable of dfMeanStd to contain both activity label and subject number. Then the script groups dfMeanStd according to the activity variable using group_by(). finally summarise_each() returns a new data frame "summary" containing the means of each measurement for each activity and subject. The activity variable still as the object numbers included so to get rid of them the script runs a substr() and trim(). As the last step, the activity and subject variables are coerced into factor variables.
